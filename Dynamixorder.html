<!DOCTYPE html>  
<html>  
<head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <title>www.delight.pk</title>  
  <style>  
    body {  
      font-family: 'Segoe UI', sans-serif;  
      max-width: 480px;  
      margin: auto;  
      padding: 20px;  
      background-color: #fdfdfd;  
      color: #333;  
    }  
    h2 {  
      text-align: center;  
      margin-bottom: 20px;  
      color: #ef6c00;  
    }  
    input, textarea, button, select {  
      width: 100%;  
      padding: 12px;  
      margin-top: 12px;  
      border-radius: 8px;  
      border: 1px solid #ccc;  
      box-sizing: border-box;  
      font-size: 15px;  
    }  
    button {  
      background-color: #ef6c00;  
      color: white;  
      border: none;  
      font-size: 17px;  
      font-weight: bold;  
      cursor: pointer;  
      transition: background 0.3s ease;  
    }  
    button:hover {  
      background-color: #d65c00;  
    }  
    .product-info {  
      padding: 12px;  
      background: #fff3e0;  
      border: 1px solid #ef6c00;  
      border-radius: 10px;  
      margin-bottom: 20px;  
    }  
    .product-card {  
      padding: 12px;  
      margin-bottom: 15px;  
      border-radius: 10px;  
      border: 1px solid #ef6c00;  
      background-color: #fff8e1;  
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);  
    }  
    .product-title {  
      font-weight: bold;  
      margin-bottom: 4px;  
    }  
    .price {  
      color: #d65c00;  
      font-weight: bold;  
      margin-bottom: 8px;  
    }  
    .label {  
      font-weight: 500;  
      font-size: 14px;  
      margin-top: 4px;  
    }  
  </style>  
</head>  
<body>  
  
  <h2>üõí Place Your Order</h2>  
  
  <div id="productInfoContainer" class="product-info"></div>  
  
  <form id="orderForm" onsubmit="handleSubmit(event);">  
    <!-- FormSubmit Hidden Inputs -->  
    <input type="hidden" name="_captcha" value="false">  
    <input type="hidden" name="_subject" value="üõçÔ∏è New Order Received">  
    <input type="hidden" name="All_Products" id="allProductsInput">  
  
    <input type="text" name="Name" placeholder="Your Name" required>  
    <input type="text" name="Phone" minlength="11" maxlength="11" placeholder="Phone Number" required>  
  
    <select name="province" required>  
      <option value="">Province/Region</option>  
      <option value="Sindh">Sindh</option>  
      <option value="Punjab">Punjab</option>  
      <option value="Balochistan">Balochistan</option>  
      <option value="Khyber Pakhtunkhwa">Khyber Pakhtunkhwa</option>  
      <option value="Gilgit-Baltistan">Gilgit-Baltistan</option>  
      <option value="Azad Kashmir">Azad Kashmir</option>  
    </select>  
  
    <input type="text" name="City" placeholder="City" required>  
    <input type="text" name="Zone" placeholder="Zone / Area" required>  
    <textarea name="Full_Address" placeholder="Full Address" rows="3" required></textarea>  
  
    <button type="submit">‚úÖ Confirm Order</button>  
  </form>  
  
  <script src="itemData2.js"></script>  
  <script>  
  const container = document.getElementById("productInfoContainer");  
  const inputAll = document.getElementById("allProductsInput");  
  const orderProduct = JSON.parse(localStorage.getItem("orderProduct"));  
  
  function stripHTML(html) {  
    const tempDiv = document.createElement("div");  
    tempDiv.innerHTML = html;  
    return tempDiv.textContent || tempDiv.innerText || "";  
  }  
  
  if (orderProduct) {  
    const image = orderProduct.image || "no-image.jpg";  
    const price = orderProduct.finalPrice || parseInt(orderProduct.price?.replace(/[^\d]/g, "") || "0");  
    const totalPrice = price + (typeof DELIVERY_CHARGES2 !== "undefined" ? DELIVERY_CHARGES2 : 0);  
  
    container.innerHTML = `  
      <div class="product-card">  
        <div class="product-title">${orderProduct.title}</div>  
        <div class="price">Rs. ${price}</div>  
        <div style="display: flex; align-items: center;">  
          <img src="${image}" alt="product" style="width: 90px; height: 90px; border-radius: 8px; object-fit: cover; margin-right: 10px;">  
          <div>  
            <div class="label">Color/Size: ${orderProduct.selectedColor || "N/A"}</div>  
            <div class="label">Delivery Charges: Rs. ${DELIVERY_CHARGES2}</div>  
            <div class="label"><strong>Total:</strong> Rs. ${totalPrice}</div>  
          </div>  
        </div>  
      </div>  
    `;  
  
    const cleanDescription = stripHTML(orderProduct.description || "N/A");  
  
    inputAll.value =  
      `${orderProduct.title} - Rs. ${price}\n` +  
      `Description: ${cleanDescription}\n` +  
      `Color/Size: ${orderProduct.selectedColor || "N/A"}\n` +  
      `Delivery: Rs.${DELIVERY_CHARGES2}\nTotal: Rs.${totalPrice}`;  
  } else {  
    container.innerHTML = "<h3 style='color:red;text-align:center;'>‚ùå No product selected.</h3>";  
    inputAll.value = "‚ùå No product selected.";  
  }  
  
  function saveOrderToLocalStorage() {  
    const allOrders = JSON.parse(localStorage.getItem("allOrders")) || [];  
    if (orderProduct) {  
      const price = orderProduct.finalPrice || parseInt(orderProduct.price?.replace(/[^\d]/g, "") || "0");  
      allOrders.push({  
        title: orderProduct.title,  
        price: "Rs. " + price,  
        total: "Rs. " + (price + (typeof DELIVERY_CHARGES2 !== "undefined" ? DELIVERY_CHARGES2 : 0)),  
        image: orderProduct.image || ""  
      });  
      localStorage.removeItem("orderProduct");  
    }  
    localStorage.setItem("allOrders", JSON.stringify(allOrders));  
  }  
  
  function handleSubmit(event) {  
    event.preventDefault();  
    saveOrderToLocalStorage();  
  
    const form = document.getElementById("orderForm");  
    const submitButton = form.querySelector('button[type="submit"]');  
    submitButton.disabled = true;  
    submitButton.innerText = "‚è≥ Placing Order...";  
  
    const formData = new FormData(form);  
  
    fetch("https://formsubmit.co/ajax/araindaniyalo2@gmail.com", {  
      method: "POST",  
      body: formData  
    })  
    .then(response => {  
      if (response.ok) {  
        window.location.href = "thanks.html";  
      } else {  
        alert("‚ùå Order failed. Please try again.");  
        submitButton.disabled = false;  
        submitButton.innerText = "‚úÖ Confirm Order";  
      }  
    })  
    .catch(error => {  
      alert("‚ùå Error: " + error.message);  
      submitButton.disabled = false;  
      submitButton.innerText = "‚úÖ Confirm Order";  
    });  
  }  
  </script>  
  
</body>  
</html>